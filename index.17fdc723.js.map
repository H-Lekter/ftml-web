{"version":3,"file":"index.17fdc723.js","sources":["../vite/modulepreload-polyfill","../src/main.ts"],"sourcesContent":["const p = function polyfill() {\n    const relList = document.createElement('link').relList;\n    if (relList && relList.supports && relList.supports('modulepreload')) {\n        return;\n    }\n    for (const link of document.querySelectorAll('link[rel=\"modulepreload\"]')) {\n        processPreload(link);\n    }\n    new MutationObserver((mutations) => {\n        for (const mutation of mutations) {\n            if (mutation.type !== 'childList') {\n                continue;\n            }\n            for (const node of mutation.addedNodes) {\n                if (node.tagName === 'LINK' && node.rel === 'modulepreload')\n                    processPreload(node);\n            }\n        }\n    }).observe(document, { childList: true, subtree: true });\n    function getFetchOpts(script) {\n        const fetchOpts = {};\n        if (script.integrity)\n            fetchOpts.integrity = script.integrity;\n        if (script.referrerpolicy)\n            fetchOpts.referrerPolicy = script.referrerpolicy;\n        if (script.crossorigin === 'use-credentials')\n            fetchOpts.credentials = 'include';\n        else if (script.crossorigin === 'anonymous')\n            fetchOpts.credentials = 'omit';\n        else\n            fetchOpts.credentials = 'same-origin';\n        return fetchOpts;\n    }\n    function processPreload(link) {\n        if (link.ep)\n            // ep marker = processed\n            return;\n        link.ep = true;\n        // prepopulate the load record\n        const fetchOpts = getFetchOpts(link);\n        fetch(link.href, fetchOpts);\n    }\n};__VITE_IS_MODERN__&&p();","import css from './css/wikidot.css';\nimport sigma from './css/sigma-9.css';\nimport init from './css/init.css';\nimport ftmlWorker from './ftml.web.worker.js?bundled-worker&dataurl';\n\nlet ftml = new Worker(ftmlWorker, {\n  type: 'module',\n});\n\n// Workerスレッドから受信\nftml.onmessage = (event: MessageEvent) => {\n  document.querySelector(\"head > style#innercss\")!.innerHTML = css;\n  document.querySelector(\"head > style#sigma\")!.innerHTML = sigma;\n  document.querySelector(\"head > style#init\")!.innerHTML = init;\n  const { html, styles } = event.data;\n\n  const previewStyles = document.getElementById('preview-styles')!;\n  const previewContent = document.getElementById('preview-content')!;\n  previewContent.innerHTML = html;\n  previewStyles.innerHTML = styles.map(v => `<style>\\n${v.replace(/\\\\</g, '&lt;')}\\n</style>`).join(\"\\n\\n\");\n};\n\nconst textareaField = document.getElementById('textarea-content')!;\n\ntextareaField.addEventListener('input', (event) => {\n  const { target } = event;\n  // TextArea要素以外の場合は終了\n  if (!(target instanceof HTMLTextAreaElement)) {\n    return;\n  }\n  const value = target.value;\n  ftml.postMessage(value);\n});\n"],"names":["relList","document","createElement","supports","link","querySelectorAll","processPreload","MutationObserver","mutations","mutation","type","node","addedNodes","tagName","rel","observe","childList","subtree","ep","fetchOpts","script","integrity","referrerpolicy","referrerPolicy","crossorigin","credentials","getFetchOpts","fetch","href","p","ftml","Worker","onmessage","event","querySelector","innerHTML","html","styles","data","previewStyles","getElementById","map","v","replace","join","addEventListener","target","HTMLTextAreaElement","value","postMessage"],"mappings":"CAAU,WACN,MAAMA,EAAUC,SAASC,cAAc,QAAQF,QAC/C,KAAIA,GAAWA,EAAQG,UAAYH,EAAQG,SAAS,kBAApD,CAGA,IAAA,MAAWC,KAAQH,SAASI,iBAAiB,6BACzCC,EAAeF,GAEf,IAAAG,kBAAkBC,IAClB,IAAA,MAAWC,KAAYD,EACf,GAAkB,cAAlBC,EAASC,KAGF,IAAA,MAAAC,KAAQF,EAASG,WACH,SAAjBD,EAAKE,SAAmC,kBAAbF,EAAKG,KAChCR,EAAeK,MAG5BI,QAAQd,SAAU,CAAEe,WAAW,EAAMC,SAAS,IAejD,SAAAX,EAAwBF,GACpB,GAAIA,EAAKc,GAEL,OACJd,EAAKc,IAAK,EAEJ,MAAAC,EApBV,SAAsBC,GAClB,MAAMD,EAAY,GAWX,OAVHC,EAAOC,YACPF,EAAUE,UAAYD,EAAOC,WAC7BD,EAAOE,iBACPH,EAAUI,eAAiBH,EAAOE,gBACX,oBAAvBF,EAAOI,YACPL,EAAUM,YAAc,UACI,cAAvBL,EAAOI,YACZL,EAAUM,YAAc,OAExBN,EAAUM,YAAc,cACrBN,EAQWO,CAAatB,GACzBuB,MAAAvB,EAAKwB,KAAMT,IAEHU,GCrCtB,IAAIC,EAAO,IAAIC,6rvvGAAmB,CAChCrB,KAAM,WAIRoB,EAAKE,UAAaC,IACPhC,SAAAiC,cAAc,yBAA0BC,4xCACxClC,SAAAiC,cAAc,sBAAuBC,kxsBACrClC,SAAAiC,cAAc,qBAAsBC,8pBACvC,MAAAC,KAAEA,EAAMC,OAAAA,GAAWJ,EAAMK,KAEzBC,EAAgBtC,SAASuC,eAAe,kBACvBvC,SAASuC,eAAe,mBAChCL,UAAYC,EACbG,EAAAJ,UAAYE,EAAOI,KAASC,GAAA,YAAYA,EAAEC,QAAQ,OAAQ,sBAAqBC,KAAK,SAG9E3C,SAASuC,eAAe,oBAEhCK,iBAAiB,SAAUZ,IACvC,MAAMa,OAAEA,GAAWb,EAEf,kBAAoBc,qBACtB,OAEF,MAAMC,EAAQF,EAAOE,MACrBlB,EAAKmB,YAAYD"}